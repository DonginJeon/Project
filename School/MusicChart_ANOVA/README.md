# 주제 
### **음원차트와 기후상태의 ANOVA**
## 배경
- 음악은 다양한 주제를 표현하는데 그중 특정 날씨와 잘 맞는 노래들이 있습니다. 비가 오면 비와 관련된 음악을 많이 듣고 맑은 날씨이면 경쾌한 여행과 관련된 음악을 많이 청취할 것이라 일반적으로 생각하는데 실제로 날씨가 음악 청취 순위에 영향을 주는지 궁금하였고 추가적으로 영향을 준다면 이는 식당, 대형마트 등 다양한 곳에서 마케팅 전략으로도 사용할 수 있을 것이라 생각했기에 분석을 진행하였습니다.


## 데이터
- [DATA](./Data/) 폴더 내에서 확인할 수 있습니다.
- 기상데이터
    ```
    폴더 내에서는 2018~2023년 까지의 데이터를 확인할 수 있습니다. 각 데이터는 서울의 종관기상관측 자료로, 총 58가지 열 중에서 '일시', '평균기온(°C)', '일강수량(mm)', '일 최심적설(cm)', '평균 전운량(1/10)'의 5가지 열만 남겨 전처리하였습니다. '일시'는 측정 날짜를 의미하며, '평균기온(°C)'은 3시간 간격으로 측정한 기온의 평균값, '일강수량(mm)'은 하루 동안의 평균 강수량, '일 최심적설(cm)'은 하루 동안 쌓인 최대 적설량을 나타냅니다. '평균 전운량(1/10)'은 구름의 양을 1~10단계로 나타내며, 기상청은 이를 '맑음', '구름많음', '흐림'으로 분류합니다.
    ```
- 랜덤날짜 : 실제 사용할 날짜를 랜덤으로 지정하여 이를 한 파일로 정리했습니다.
- 음원차트순위
    - 지니뮤직에서 차트 200위까지를 크롤링하였습니다. 제목, 아티스트, 장르의 컬럼으로 구성하였습니다. 저작권상의 문제로 차트순위에 대한 데이터는 해당 폴더에는 첨부하지 않았습니다.


## 요약
### 가설
##### 가설 1
- **가설**: 기온과 기후가 발라드 장르 청취 수에 영향을 미칠 것이다.
- **모델**:  
$$
y_{ijk} = \mu + \tau_i + \beta_j + (\tau\beta)_{ij} + \epsilon_{ijk}
$$
- $tau_i$: 기온, $beta_j$: 기후
- **결과**: 기온은 유의, 기후는 유의하지 않음.

---

##### 가설 2
- **가설**: 우천 여부와 기온이 발라드 청취 수에 영향을 미칠 것이다.
- **모델**:  
$$
y_{ijk} = \mu + \tau_i + \beta_j + (\tau\beta)_{ij} + \epsilon_{ijk}
$$
- $tau_i$: 기온, $beta_j$: 우천 여부
- **결과**: 날씨 P-value가 유의미함.

---

##### 가설 3
- **가설**: 계절이 발라드 청취 수에 영향을 미칠 것이다.
- **모델**:  
$$
y_{ijk} = \mu + \tau_i + \beta_j + \epsilon_{ijk}
$$
- $tau_i$: 계절, $beta_j$: 년도 블록
- **결과**: P-value 0.9, 유의하지 않음.

---

##### 가설 4
- **가설**: 비 오는 날에는 비와 관련된 노래 청취 수가 증가할 것이다.
- **모델**:  
$$
y_{ij} = \mu + \tau_i + \epsilon_{ij}
$$
- $tau_i$: 강수 여부
- **결과**: P-value 0.015, 유의미함.

---

##### 가설 5
- **가설**: 여름이면서 비가 오지 않으면 댄스, 락 청취 수에 영향을 미칠 것이다.
- **모델**:  
$$
y_{ijk} = \mu + \tau_i + \beta_j + (\tau\beta)_{ij} + \epsilon_{ijk}
$$
- $tau_i$: 여름, $beta_j$: 강수 여부
- **결과**: 모든 P-value 유의하지 않음.

---
### 결론
#### 가설 1: 기온과 기후가 발라드 청취 수에 미치는 영향
- **결과**: 기온은 발라드 청취 수에 영향을 미치지만, 기상 상태(비와 눈을 포함한 변수)는 유의하지 않음.

#### 가설 2: 우천 여부와 기온이 발라드 청취 수에 미치는 영향
- **결과**: 비가 발라드 청취 수에 영향을 미침. 기온 역시 기온이 낮아질수록 청취 수가 높아짐. 눈을 제외한 순수 비의 영향이 유의미함.

#### 가설 3: 계절이 발라드 청취 수에 미치는 영향
- **결과**: 봄과 겨울처럼 온도가 낮은 계절에 발라드 청취 수가 높음. 연도별 차이는 트로트 열풍으로 인한 영향으로 추정됨.

#### 가설 4: 비가 내리는 날 비와 관련된 노래 청취
- **결과**: 비 오는 날에는 제목에 비와 관련된 단어(비, 우산, Rain)가 포함된 노래의 청취 수가 증가함.

#### 가설 5: 여름에 비가 오지 않는 날 댄스, 락 청취 수에 미치는 영향
- **결과**: 댄스와 락 장르가 신나는 음악으로 구분되지 않고, 다른 장르(인디, 힙합)에도 신나는 음악이 포함될 수 있어 실험 결과는 유의미하지 않음.

#### 해석
```
실험 결과는 발라드를 활용했던 이전 실험에 비해 유의미하다고 보기 어려웠습니다. 그 이유는 현재 음원 차트의 장르 구분이 신나는 음악이라고 할 수 있는 음악들이 댄스와 락 외에도 다른 장르로 구분될 수 있기 때문입니다. 예를 들어, 인디나 랩/힙합 장르에도 흔히 신나는 음악이라고 불릴 수 있는 곡들이 포함되어 있을 가능성이 있습니다. 다시 말해, 신나는 음악이라는 개념은 잔잔한 음악에 비해 주관적인 요소가 더 크며, 실제로 아이유의 'Love Poem' 같은 곡이 락으로 구분되어 있는 것처럼 음원 차트의 장르 구분이 애매합니다. 그렇기 때문에 단순히 장르를 기준으로 여름이나 날씨가 좋을 때 들을 음악을 구분하는 것은 어려울 수 있다는 생각을 하였습니다.

또한, 실험 기간이 2020년부터 2023년이었기 때문에 코로나19로 인해 여행이나 외부 활동을 하며 듣는 음악에 대한 수요가 적었을 가능성도 고려해야 한다고 판단했습니다.
```
> 자세한 그래프는 보고서에서 확인하실 수 있습니다.

## 보고서
- 보고서는 아래 링크를 통해 확인하실 수 있습니다.
- [보고서](./실험계획법%20기말%20프로젝트%20레포트.docx)

## 참고코드
- 기상데이터 코드 : 기상 데이터를 생성하는데 사용한 코드입니다.
- [ANOVA 코드](./코드/ANOVA%20코드.R) : ANOVA 코드 입니다
- [차트 크롤링(200위까지) 코드](./코드/자트%20크롤링(200위까지)%20코드.ipynb) : 차트 크롤링 코드 입니다.
    - 사이트에서 일단위 차트가 집계되는 주소에서 곡 제목과 아티스트를 크롤링하고 이후 앨범아트를 클릭하여 그 안에서 페이지를 순회하며 200위까지의 순위를 크롤링하여 하나의 데이터프레임으로 만드는 코드입니다.

## 개선
- 차트 크롤링 코드에 대하여 200위까지가 한 페이지에 없어서 4번의 작업을 따로 했는데 반복문을 통하여 더 편리하게 개선하였습니다.
- [개선코드](./코드/자트%20크롤링(200위까지)%20코드_개선.ipynb)

## 파일 및 폴더설명
    - 보고서 : 보고서를 확인하실 수 있습니다.
    - 코드 : 해당 분석에서 사용된 코드를 확인하실 수 있습니다.
    - Data : 분석에서 사용된 데이터가 모여있습니다.(차트 크롤링 데이터 제외)
    - IDEA : 분석 과정에서 제시되었던 아이디어가 정리되어 있습니다.
